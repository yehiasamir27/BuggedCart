<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Products - BuggedCart</title>

    <!-- Fonts + hacker CSS/JS -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hacker.css') }}">
    <script src="{{ url_for('static', filename='js/hacker.js') }}" defer></script>
</head>
<body class="hacker-body">
    <canvas id="matrix-canvas"></canvas>

    <header class="hacker-header">
      <div class="hacker-logo">BC<span class="muted">-lab</span></div>
      <nav class="hacker-nav">
        <a href="/" class="nav-link">HOME</a>
        <a href="/products" class="nav-link">PRODUCTS</a>
        <a href="/vulns" class="nav-link">VULN-OVERVIEW</a>
        <a href="/admin/contact" class="nav-link">CONTACT</a>
        <a href="/login" class="nav-btn">ADMIN</a>
      </nav>
    </header>

    <main class="container">
      <section class="hacker-card">
        <h1>Products</h1>
        <p class="muted">Browse demo products. Click a product to view details.</p>

        <ul style="list-style:none;padding:0;margin-top:18px;">
          {% if products %}
            {% for product in products %}
              <li class="hacker-card" style="margin:10px 0; display:flex; justify-content:space-between; align-items:center;">
                <div>
                  <a class="inline" href="/product/{{ product[0] if product[0] is defined else product.id }}">
                    {{ product[1] if product[1] is defined else product.name }}
                  </a>
                  <div class="muted" style="font-size:12px;">{{ product[3] if product[3] is defined else product.description }}</div>
                </div>
                <div style="text-align:right;">
                  <div class="price">${{ product[2] if product[2] is defined else product.price }}</div>
                  <div style="margin-top:8px;">
                    <form method="POST" action="/admin/delete/{{ product[0] if product[0] is defined else product.id }}" style="display:inline;">
                      <button type="submit" class="btn" onclick="return confirm('Delete this product?')">Delete</button>
                    </form>
                    <a href="/product/{{ product[0] if product[0] is defined else product.id }}" class="btn" style="margin-left:8px;">View</a>
                  </div>
                </div>
              </li>
            {% endfor %}
          {% else %}
            <li>No products found.</li>
          {% endif %}
        </ul>
      </section>
    </main>

    <footer class="hacker-footer">
      <div>BuggedCart — training lab UI (display only)</div>
      <div class="muted">Keep vulnerable services isolated & local.</div>
    </footer>
</body>
</html>
